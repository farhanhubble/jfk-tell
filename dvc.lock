schema: '2.0'
stages:
  download_2025_data:
    cmd: python download.py
    deps:
    - path: download.py
      hash: md5
      md5: 028e470b33f306cbd039224f822d8a37
      size: 1920
    outs:
    - path: data/archives.gov/2025
      hash: md5
      md5: 8fce3dd9234aee1ea3a0c7eb1740380b.dir
      size: 6468234801
      nfiles: 2182
  extract:
    cmd: python extract.py
    deps:
    - path: data/archives.gov
      hash: md5
      md5: 00fb82b4b69fbf7628dd7efcf7b8cf1a.dir
      size: 6468234807
      nfiles: 2183
    - path: extract.py
      hash: md5
      md5: dae07b2cdb407d2612f5274a196411d0
      size: 2709
    - path: prompts/extraction/instructions.txt
      hash: md5
      md5: f396caf51c0fb61eb658b672c2f98f9f
      size: 2170
    - path: prompts/extraction/system.txt
      hash: md5
      md5: 89f85aaa4e9e6edda90ac93dd3949b05
      size: 109
    params:
      .config/default.json:
        extraction:
          model_name: gemini-2.0-flash
          prompt_file: prompts/extraction/instructions.txt
          system_prompt_file: prompts/extraction/system.txt
          max_tokens: 4096
          src_dir: data/archives.gov
          dest_dir: data/extracted
          include_annotation: true
    outs:
    - path: data/extracted
      hash: md5
      md5: 2c293d05ba9a85e8067a588aa00b2370.dir
      size: 14480416
      nfiles: 2182
  download:
    cmd: python download.py
    deps:
    - path: download.py
      hash: md5
      md5: a07abb649ceffb1e814db8e2ea04369d
      size: 4416
    params:
      .config/default.json:
        download:
          URLS:
            2017-2018:
              data_url: https://www.archives.gov/research/jfk/release-2017-2018
            '2021':
              data_url: https://www.archives.gov/research/jfk/release-2021
            '2022':
              data_url: https://www.archives.gov/research/jfk/release-2022/
            '2023':
              data_url: https://www.archives.gov/research/jfk/release-2023/
            '2025':
              data_url: https://www.archives.gov/research/jfk/release-2025
          download_dir: data/archives.gov
          download_cache: data/.cache/archives.gov
    outs:
    - path: data/archives.gov
      hash: md5
      md5: b93702142990a6484c627d37b4c8042b.dir
      size: 57406456148
      nfiles: 56300
